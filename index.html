<!DOCTYPE html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8">
	<title>GO, by Ishmael</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
	<script src="ish.go.js"></script>
	<script src="ish.go.logic.js"></script>
	<script src="ish.go.view.h5.js"></script>
	<script>
		$(document).keypress(function(e){
		if (e.which == 32){
			Ish.Go.View.recall(1);
		}
		});
	</script>
	<link rel="stylesheet" href="style-h5.css" />
</head> 
<body>
	
	<div id="gameSection">
		<div id="board"></div>
		
		<div id="info">
			<div id="turn"></div>
			<br>
			<div id="score"></div>
			<br>
			<div id="coords"></div>
			<br>
			<div id="point"></div>
		</div>
		
		<div class="clear"></div>
	</div>	
	
	<div id="devSection">
		<div>
			<span id="toggleLink" class="link" onclick="$('#devTools').slideToggle()">[Toggle Developer Tools]</span>
		</div>
		<div id="devTools">
			<ul id="devActions">
				<li class="link" onclick="Ish.Go.View.startNewGame()">New Game</li>
				<li class="link" onclick="$('#score').toggle()">Toggle Scores</li>
				<li class="link" onclick="Ish.Go.View.toggleMarkedBoard()">Toggle Territories</li>
				<li class="link" onclick="Ish.Go.View.printGameState()">Print Game State</li>
			</ul>
			<div id="gameState"></div>
		</div>
	</div>

	<form id="jsonFile" name="jsonFile" enctype="multipart/form-data" method="post">

		<fieldset>
		  <h2>Json File</h2>
		   <input type='file' id='fileinput'>
		   <input type='button' id='btnLoad' value='Load' onclick='loadFile();'>
		</fieldset>
	  </form>
	  
	  
	  <script type="text/javascript">
	  
		function loadFile() {
		  var input, file, fr;
	  
		  if (typeof window.FileReader !== 'function') {
			alert("The file API isn't supported on this browser yet.");
			return;
		  }
	  
		  input = document.getElementById('fileinput');
		  if (!input) {
			alert("Um, couldn't find the fileinput element.");
		  }
		  else if (!input.files) {
			alert("This browser doesn't seem to support the `files` property of file inputs.");
		  }
		  else if (!input.files[0]) {
			alert("Please select a file before clicking 'Load'");
		  }
		  else {
			file = input.files[0];
			fr = new FileReader();
			fr.onload = receivedText;
			fr.readAsText(file);
		  }
	  
		  function receivedText(e) {
			let lines = e.target.result;
			var newArr = JSON.parse(lines); 
			console.log(newArr);
			gGameState.boardHistory = newArr;
			Ish.Go.View.recall(1)
		  }
		}
	  </script>
	  

</body> 
</html> 